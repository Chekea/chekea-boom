"use strict";(self.webpackChunkmy_react_appo=self.webpackChunkmy_react_appo||[]).push([[412],{9412:(e,t,a)=>{a.r(t),a.d(t,{default:()=>K});var o=a(9950),n=a(3464),l=a(33),c=a(8170),s=a(20),r=a(9739),i=a(226),u=a(4857),d=a(6589),g=a(6491),x=a(899),h=a(975),m=a(7873),y=a(9890),p=a(5277),C=a(2053),v=a(6639),f=a(2578),j=a(9751),A=(a(6820),a(294)),b=a(8429),E=a(2845),S=a(2675),R=a(4414);const w=e=>{let{isOpen:t,onClose:a,onConfirm:u}=e;const[d,g]=(0,o.useState)("");return(0,R.jsxs)(n.A,{open:t,onClose:a,children:[(0,R.jsx)(l.A,{children:"Introduzca Descuento"}),(0,R.jsx)(c.A,{children:(0,R.jsx)(s.A,{autoFocus:!0,margin:"dense",label:"Descuento en %",type:"number",fullWidth:!0,value:d,onChange:e=>g(e.target.value)})}),(0,R.jsxs)(r.A,{children:[(0,R.jsx)(i.A,{onClick:a,children:"Cancel"}),(0,R.jsx)(i.A,{onClick:()=>{d<90?u(d):alert("Ha ocurido un error"),a()},color:"primary",children:"Confirm"})]})]})},K=()=>{const[e,t]=(0,o.useState)(""),[a,n]=(0,o.useState)(""),[l,c]=(0,o.useState)(""),[r,K]=(0,o.useState)(""),[k,D]=(0,o.useState)(null),[P,T]=(0,o.useState)(""),[I,F]=(0,o.useState)(!1),[G,O]=(0,o.useState)(""),[N,L]=(0,o.useState)(!1),[z,W]=(0,o.useState)(""),[U,q]=(0,o.useState)([]),[Z,_]=(0,o.useState)("Aerea"),[J,M]=(0,o.useState)([]),[Y,B]=(0,o.useState)(!0),[H,V]=(0,o.useState)([]),[X,Q]=(0,o.useState)([]),[$,ee]=(0,o.useState)([]),[te,ae]=(0,o.useState)([]),[oe,ne]=(0,o.useState)({}),[le,ce]=(0,o.useState)(""),[se,re]=(0,o.useState)(""),[ie,ue]=(0,o.useState)(""),de=(0,f.C3)(A.A),ge=(0,u.A)(),xe=(0,d.A)(ge.breakpoints.down("sm")),{codigo:he,contexto:me}=(0,b.g)(),[ye,pe]=(0,o.useState)(!1),[Ce,ve]=(0,o.useState)(!1),[fe,je]=(0,o.useState)(!1),[Ae,be]=(0,o.useState)("");(0,b.Zp)();console.log(he);const[Ee,Se]=(0,o.useState)(null),Re=()=>{ve(!1)},we=e=>"Guinea Ecuatorial"===e?"Nacional":"Exterior",Ke=async e=>{let t=parseInt(e),a=we(k.Pais);const o=(0,f.KR)(de,"GE/".concat(a,"/Prod/").concat(he));try{if(console.log(e,"existe"),await(0,f.yo)(o,{Descuento:t}),t>0){(0,f.KR)(de,"GE/Rebajas/".concat(he));const e=(0,f.KR)(de,"GE/Filtros/".concat(a,"/").concat(k.Categoria,"/").concat(he));(0,f.KR)(de,"GE/".concat(a,"/Prod/").concat(he));await(0,f.yo)(e,{Descuento:t})}else{const e=(0,f.KR)(de,"GE/Rebajas/".concat(he)),o=(0,f.KR)(de,"Filtros/".concat(a,"/").concat(k.Categoria,"/").concat(he));await(0,f.yo)(o,{Descuento:t}),await(0,f.TF)(e)}console.log("Data updated successfully")}catch(n){console.error("Error updating data: ",n)}},ke=async()=>{try{const e=(0,f.KR)(de,"GE");await(0,f.TF)((0,f.KR)(e,"Otros/".concat(he))),await(0,f.TF)((0,f.KR)(e,"Detalles/".concat(he))),"Moda & Accesorios"!==k.Categoria?await(0,f.TF)((0,f.KR)(e,"Filtros/".concat(we(k.Pais),"/").concat(k.Categoria,"/").concat(he))):await(0,f.TF)((0,f.KR)(e,"Filtros/".concat(we(k.Pais),"/").concat(k.Categoria,"/").concat(k.Genero,"/").concat(he))),await(0,f.TF)((0,f.KR)(e,"".concat(we(k.Pais),"/Prod/").concat(he))),console.log("Data removed successfully")}catch(e){console.error("Error removing data: ",e)}};(0,o.useEffect)((()=>((()=>{let e=[],a=[];const o=(0,f.KR)(de,"GE/".concat(me,"/Prod/").concat(he));(0,f.Zy)(o,(o=>{let l=o.val();D(l),t(l.Titulo),O(l.Ubicacion),n(l.Precio),c(l.Dimension),K(l.Espacio),W(l.Detalles),T(l.Cantidad),F(l.Stock);const s=l.Color,r=l.Talla;console.log(s),s&&(Object.values(s).forEach((t=>{e.push(t.label),console.log("Color Code: ".concat(t.Codigo,", Label: ").concat(t.label))})),V(e)),r&&(Object.values(r).forEach((e=>{a.push("".concat(e.label,":").concat(e.precio))})),ee(a))}))})(),()=>{})),[]);const De=async(e,t,a)=>{const o=(0,f.P)((0,f.KR)(de,"GE/".concat(me,"/Prod/").concat(he,"/").concat(t)),(0,f.kT)("label"),(0,f.iz)(e));if("Eliminar"===a){const e=await(0,f.Jt)(o);if(e.exists()){let a;e.forEach((e=>{a=e.key})),console.log("Key:",a);const o=(0,f.KR)(de,"GE/".concat(me,"/Prod/").concat(he,"/").concat(t,"/").concat(a));await(0,f.TF)(o),console.log("Node deleted successfully.")}}else try{(await(0,f.Jt)(o)).exists()||(console.log("ENTRAMOS",e,t),Pe(e,t))}catch(n){return console.error("Error checking value existence in the database:",n),!1}},Pe=async(e,t)=>{let o=we(k.Pais);const n=(0,f.VC)((0,f.KR)(de,"GE/".concat(o,"/Prod/").concat(he,"/").concat(t))).key,l="GE/".concat(o,"/Prod/").concat(he,"/").concat(t,"/").concat(n);if("Color"===t)await(0,f.hZ)((0,f.KR)(de,l),{label:e,codigo:n}),console.log({label:e,codigo:n});else{console.log({label:e,precio:parseInt(""===oe[e]?a:oe[e]),codigo:n});const t=parseInt(""===oe[e]?a:oe[e],10);await(0,f.hZ)((0,f.KR)(de,n),{label:e,precio:t,codigo:n})}};return(0,R.jsxs)(g.A,{component:"form",onSubmit:async t=>{t.preventDefault();const o={...k,Titulo:e,Ubicacion:G,Precio:parseFloat(a),Cantidad:parseInt(P),Detalles:z,Stock:"Nacional"===me?I:k.Stock,Espacio:"Exterior"===me?parseFloat(r):0,Dimension:void 0!==l?parseFloat(l):parseFloat(1.5)},n=(0,f.KR)(de,"GE/".concat(me,"/Prod/").concat(he)),c=(0,f.KR)(de,"GE/Filtros/".concat(me,"/").concat(k.Categoria,"/").concat(he));await(0,f.yo)(n,o),await(0,f.yo)(c,o);for(const e of H)De(e,"Color","");for(const e in oe)oe.hasOwnProperty(e)&&De(e,"Talla","");console.log(o.Categoria,k)},sx:{mt:2,padding:2},children:[(0,R.jsx)(E.A,{texto:"Editar"}),(0,R.jsxs)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",marginTop:xe?40:0},children:[(0,R.jsx)(i.A,{variant:"contained",color:"info",onClick:()=>{pe(!0)},children:"APLICAR DESCUENTO"}),(0,R.jsx)(i.A,{variant:"contained",color:"error",style:{marginLeft:25},onClick:async()=>{const e=(0,f.KR)(de,"GE/Otros/".concat(he)),t=(0,j.c7)(A.A);try{const a=await(0,f.Jt)(e);if(a.exists()){const e=a.val();for(const a in e){const o=e[a].Imagen;if(o){const e=(0,j.KR)(t,o);await(0,j.XR)(e),console.log("Deleted image: ".concat(o))}}ke()}else console.log("No data available")}catch(a){console.error("Error: ",a)}},children:"ELIMINAR PRODUCTOR"})]}),(0,R.jsxs)(x.Ay,{container:!0,spacing:2,marginTop:xe?5:0,children:[(0,R.jsx)(x.Ay,{item:!0,xs:12,children:(0,R.jsx)(s.A,{label:"Title",variant:"outlined",value:e,onChange:e=>t(e.target.value),required:!0,fullWidth:!0})}),(0,R.jsx)(x.Ay,{item:!0,xs:12,children:(0,R.jsx)(s.A,{label:"Ubicacion",variant:"outlined",value:G,onChange:e=>O(e.target.value),required:!0,fullWidth:!0})}),(0,R.jsx)(x.Ay,{item:!0,xs:12,children:(0,R.jsx)(s.A,{label:"Price",variant:"outlined",type:"number",value:a,onChange:e=>n(e.target.value),required:!0,fullWidth:!0})}),"Nacional"===me&&(0,R.jsxs)(g.A,{display:"flex",alignItems:"flex-end",marginY:1,margin:1,children:[(0,R.jsx)(s.A,{label:"Cantidad",type:"number",value:P,onChange:e=>T(e.target.value),style:{marginLeft:"8px"}}),(0,R.jsx)("div",{style:{margin:10,marginLeft:30},children:(0,R.jsx)(h.A,{control:(0,R.jsx)(m.A,{checked:I,onChange:e=>{F(e.target.checked)}}),label:"Stock"})})]}),"Exterior"===me&&(0,R.jsx)(x.Ay,{item:!0,xs:12,children:(0,R.jsx)(s.A,{label:"Introduzca los Cm3",variant:"outlined",type:"number",value:r,onChange:e=>K(e.target.value),fullWidth:!0})}),(0,R.jsx)(x.Ay,{item:!0,xs:12,children:(0,R.jsx)(s.A,{label:"Introduzca los Kg",variant:"outlined",type:"number",value:l,onChange:e=>c(e.target.value),fullWidth:!0})}),(0,R.jsx)(x.Ay,{item:!0,xs:12,children:(0,R.jsx)(s.A,{label:"Details",variant:"outlined",multiline:!0,rows:4,value:z,onChange:e=>W(e.target.value),required:!0,fullWidth:!0})}),(0,R.jsxs)("div",{style:{margin:10},children:[(0,R.jsx)(y.A,{value:le,onChange:e=>ce(e.target.value),onKeyDown:e=>{"Enter"!==e.key&&","!==e.key||(e.preventDefault(),le.trim()&&(V([...H,le.trim()]),ce("")))},placeholder:"Introduzca Color"}),H.map(((e,t)=>(0,R.jsx)(p.A,{label:e,style:{margin:3},onDelete:()=>{return be(t=e),je("Color"),ve(!0),void V(H.filter((e=>e!==t)));var t}},t)))]}),(0,R.jsxs)("div",{style:{margin:10},children:[(0,R.jsx)(y.A,{value:se,onChange:e=>re(e.target.value),onKeyDown:e=>{"Enter"!==e.key&&","!==e.key||(e.preventDefault(),console.log(se,"k es"),se.trim()&&(ae([...te,se.trim()]),ne({...oe,[se.trim()]:""}),console.log("wetiin",oe),re("")))},placeholder:"Introduzca Estilo"}),$.map(((e,t)=>(0,R.jsx)(p.A,{label:e,style:{margin:3},onDelete:()=>(e=>{ve(!0);const t=e.split(":");be(t[0]),je("Talla"),ee($.filter((t=>t!==e)))})(e)}))),te.length>0&&(0,R.jsx)(C.A,{children:"Nuevos"})]}),te.map(((e,t)=>(0,R.jsxs)(g.A,{display:"flex",alignItems:"center",marginY:xe?1:5,children:[(0,R.jsx)(p.A,{label:e,style:{margin:3},onDelete:()=>(e=>{console.log("wettin"),ae(te.filter((t=>t!==e)));const t={...oe};delete t[e],ne(t)})(e)}),(0,R.jsx)(s.A,{label:"Price",type:"number",value:oe[e]||"",onChange:t=>((e,t)=>{ne({...oe,[t]:e.target.value})})(t,e),style:{marginLeft:"8px"}})]},t))),(0,R.jsx)("div",{style:{display:"flex",alignContent:"center",alignItems:"center"},children:(0,R.jsx)(i.A,{type:"submit",variant:"contained",color:"primary",children:N?(0,R.jsx)(v.A,{color:"warning",size:24}):"PUBLICAR"})})]}),Ee&&(0,R.jsxs)("p",{children:["Entered number: ",Ee]}),(0,R.jsx)(w,{isOpen:ye,onClose:()=>{pe(!1)},onConfirm:e=>{Se(e),Ke(e),console.log("Confirmed value:",e)}}),(0,R.jsx)(S.A,{open:Ce,message:"Seguro que desea borrar este valor?",onClose:Re,onConfirm:()=>{De(Ae,fe,"Eliminar"),Re()}})]})}}}]);